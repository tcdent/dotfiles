##### basics #####
set -g mouse on
bind -n MouseDrag1Border resize-pane -M
set -g focus-events on
set -g base-index 1
set -g pane-base-index 1

##### mouse scroll targets pane under cursor #####
# If alternate screen (nvim, etc), send scroll to app; otherwise enter copy-mode
bind -n WheelUpPane select-pane -t= \; if-shell -F "#{alternate_on}" "send-keys -M" "copy-mode -e; send-keys -M"
bind -n WheelDownPane select-pane -t= \; send-keys -M

##### window title (shown in Ghostty tab/window) #####
set -g set-titles on
set -g set-titles-string "#S"

##### colors #####
set -g pane-active-border-style "fg=magenta"

##### status bar #####
set -g status off

##### auto-name sessions based on directory #####
set-hook -g session-created 'run-shell "tmux rename-session \"$(basename \"#{pane_current_path}\")\""'

##### pane resize with prefix + arrow keys #####
bind -r Up resize-pane -U 5
bind -r Down resize-pane -D 5
bind -r Left resize-pane -L 5
bind -r Right resize-pane -R 5

##### pane selection with Alt keys #####
bind -n M-1 select-pane -t 1
bind -n M-2 select-pane -t 2
bind -n M-3 select-pane -t 3
bind -n M-4 select-pane -t 4
bind -n M-5 select-pane -t 5
bind -n M-6 select-pane -t 6
bind -n M-7 select-pane -t 7
bind -n M-8 select-pane -t 8
bind -n M-9 select-pane -t 9

##### dev workspace: 4 left + 1 right (Neovim) #####
# prefix + w → new window with the layout
bind w new-window -n dev \; \
  split-window -h -p 80 \; \
  select-pane -T "nvim" \; \
  send-keys 'nvim --listen /tmp/nvim-$(tmux display -p "#S").sock .' C-m \; \
  select-pane -t 1 \; \
  split-window -v \; \
  split-window -v \; \
  split-window -v

##### stats workspace: 2x2 grid + split bottom-left #####
# prefix + e → system stats layout
bind e new-window -n stats \; \
  split-window -h -p 50 \; \
  select-pane -t 1 \; \
  split-window -v -p 50 \; \
  select-pane -t 3 \; \
  split-window -v -p 50 \; \
  select-pane -t 2 \; \
  split-window -h -p 50 \; \
  select-pane -t 1 \; \
  send-keys 'btop' C-m \; \
  select-pane -t 4 \; \
  send-keys 'lazypodman' C-m \; \
  select-pane -t 5 \; \
  send-keys 'grc tail -f /var/log/*.log' C-m \; \
  select-pane -t 1

##### show pane titles in border #####
set -g pane-border-status top
set -g pane-border-format " #{pane_index}: #{pane_title} "
